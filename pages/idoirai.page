<apex:page standardcontroller="Delivery__c" recordSetVar="recs" extensions="NCDSRM.apSRMLexListActionExtension"><apex:slds /><script>var encodedEncryptedMasterId = "%2F5%2FvXwz2bi2HV%2BEi9sWOshUIjLyQF3v%2B3vGkYP6N2t%2BNqCSPBPo%2B6rTyS82nvE0v";var recordIds = JSON.parse("{!JSENCODE(recIds)}");var nextIndex = 0;document.addEventListener("DOMContentLoaded", function () {    if(recordIds.length > 0) {      {!$RemoteAction.apSRMLexListActionExtension.lexOpenListPDF}(encodedEncryptedMasterId, recordIds[nextIndex], "0", lexCallback, {escape: false});    } else {      var modalHead = document.getElementById("modalHeadTitle");      modalHead.innerText = "Error";      document.getElementById("modalHeader").classList.add("slds-theme_error", "slds-theme_alert-texture");      var waitingContainer = document.getElementById("waiting_container");      waitingContainer.innerText = "{!strSRMBtsDlg09}";      waitingContainer.classList.remove("slds-progress-bar", "slds-progress-bar_circular", "slds-progress-bar_large");      waitingContainer.classList.add("slds-text-align_center", "slds-text-color_error");      document.getElementById("modalContent").style.padding = "1.5rem";      document.getElementById("modalFooter").style.display = "block";    }});function lexCallback(result, event) {  if(!event.status) {    var waitingContainer = document.getElementById("waiting_container");    waitingContainer.classList.remove("slds-progress-bar", "slds-progress-bar_circular", "slds-progress-bar_large");    waitingContainer.classList.add("slds-text-align_center", "slds-text-color_error");    waitingContainer.innerText = "Error occured. " + event.message;    var modalHead = document.getElementById("modalHeadTitle");    modalHead.innerText = "Error";  } else if(nextIndex < recordIds.length - 1) {    nextIndex++;    var percentage = Math.floor(nextIndex / recordIds.length * 100);    var waitingContainer = document.getElementById("waiting_container");    waitingContainer.setAttribute("aria-valuenow", percentage);    waitingContainer.firstElementChild.style.width = percentage + "%";    waitingContainer.firstElementChild.firstElementChild.innerText = percentage + "%";    {!$RemoteAction.apSRMLexListActionExtension.lexOpenListPDF}(encodedEncryptedMasterId, recordIds[nextIndex], result, lexCallback, {escape: false});  } else {    var waitingContainer = document.getElementById("waiting_container");    waitingContainer.classList.remove("slds-progress-bar", "slds-progress-bar_circular", "slds-progress-bar_large");    waitingContainer.classList.add("slds-text-align_center");    window.open("{!$Site.Prefix}" + "/apex/NCDSRM__vfSRMOutPdfL?strIdKey=" + result);    modalClose();  }}function modalClose() {  history.go(-1);}</script><div class="slds-scope">  <div>    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">      <div class="slds-modal__container">        <header class="slds-modal__header" id="modalHeader">          <h2 id="modalHeadTitle" class="slds-text-heading_medium slds-hyphenate">{!strSRMBtsDlg10}</h2>        </header>        <div class="slds-modal__content slds-p-around_medium" id="modalContent" style="padding:4rem 2rem;">          <div id="waiting_container" class="slds-progress-bar slds-progress-bar_circular slds-progress-bar_large" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" role="progressbar">            <span class="slds-progress-bar__value" style="width:0%;">              <span class="slds-assistive-text">0%</span>            </span>          </div>        </div>        <footer class="slds-modal__footer" style="display:none;" id="modalFooter">          <button class="slds-button slds-button_neutral" onclick="modalClose();">Close</button>        </footer>      </div>    </section>    <div class="slds-backdrop slds-backdrop_open"></div>  </div></div></apex:page>